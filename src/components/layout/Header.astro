---
const navLinks = [
  { href: '/', label: '首页' },
  { href: '/products', label: '产品中心' },
  { href: '/solutions', label: '解决方案' },
  { href: '/services', label: '技术服务' },
  { href: '/cases', label: '客户案例' },
  { href: '/partners', label: '合作伙伴' },
  { href: '/join', label: '渠道加盟' },
  { href: '/about', label: '关于我们' }
];
const currentPath = Astro.url.pathname.replace(/\/$/, '') || '/';
---
<header class="bg-white/90 backdrop-blur border-b border-slate-100 sticky top-0 z-50">
  <div class="mx-auto flex max-w-6xl items-center justify-between px-4 py-4">
    <a href="/" class="flex items-center gap-3">
      <div class="flex h-12 w-12 items-center justify-center rounded-2xl bg-brand-500 text-white font-semibold">PY</div>
      <div>
        <p class="font-semibold text-slate-900">普悦天诚</p>
        <p class="text-xs text-slate-500">PYTC · IT Solutions</p>
      </div>
    </a>
    <nav class="hidden items-center gap-6 text-sm font-medium text-slate-600 lg:flex">
      {navLinks.map((item) => (
        <a
          href={item.href}
          class={`transition hover:text-brand-500 ${currentPath === (item.href.replace(/\/$/, '') || '/') ? 'text-brand-600' : ''}`}
        >
          {item.label}
        </a>
      ))}
      <a
        href="/contact"
        class="rounded-full border border-brand-200 bg-brand-50 px-4 py-2 text-brand-600 hover:bg-brand-100"
      >
        联系我们
      </a>
    </nav>
    <button
      class="inline-flex h-11 w-11 items-center justify-center rounded-full border border-slate-200 text-slate-700 lg:hidden"
      aria-controls="mobile-menu"
      aria-expanded="false"
      data-mobile-toggle
    >
      <span class="sr-only">打开导航</span>
      <svg class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 7h16M4 12h16M4 17h16" />
      </svg>
    </button>
  </div>
  <div id="mobile-menu" class="hidden border-t border-slate-100 bg-white lg:hidden" data-mobile-panel>
    <div class="space-y-1 px-4 py-4 text-base text-slate-700">
      {navLinks.map((item) => (
        <a
          href={item.href}
          class={`block rounded-lg px-3 py-2 ${currentPath === (item.href.replace(/\/$/, '') || '/') ? 'bg-brand-50 text-brand-600' : 'hover:bg-slate-50'}`}
        >
          {item.label}
        </a>
      ))}
      <a href="mailto:info@purytech.cn" class="block rounded-lg bg-brand-500 px-3 py-2 text-center text-white">
        立即咨询
      </a>
    </div>
  </div>
</header>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const toggleButton = document.querySelector('[data-mobile-toggle]');
    const panel = document.querySelector('[data-mobile-panel]');
    if (!toggleButton || !panel) return;
    toggleButton.addEventListener('click', () => {
      const expanded = toggleButton.getAttribute('aria-expanded') === 'true';
      toggleButton.setAttribute('aria-expanded', String(!expanded));
      panel.classList.toggle('hidden');
    });
  });
</script>
